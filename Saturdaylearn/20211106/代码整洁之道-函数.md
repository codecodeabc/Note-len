#### 函数

##### 1.简洁短小

##### 2.只做一件事

##### 3.switch和if语句

策略模式或抽象工厂替代，开发增加入口，关闭修改入口

##### 4.描述性名称

名称和功能含义一致

##### 5.最理想的参数数量是零，其次是一，再次是二，应尽量避免三

- **不要传递标识参数**，标识参数大声宣布函数不是做一件事。如果标识为 `true` 将会这样，标识为 `false` 则会那样

- 二元函数：有些时候两个参数正好。例如 `Point p = new Point(0, 0)`;因为点天生拥有两个参数。但大多数情况下应该尽量利用一些机制将二元函数转换成一元函数。例如，把writeField 方法写成outputStream的成员之一

  ```java
  // bad
  writeField(outputStream, name);
  // good
  outputStream.writeFiled(name);
  ```

- 参数对象：如果函数看起来需要两个、三个、或三个以上参数，就说明其中一些应该封装为类了

  ```java
  // bad
  Circle makeCircle(double x, double y, double, radius);
  // good
  Circle makeCircle(Point center, double radius);
  ```

  从参数封装成对象，从而减少参数数量，看起来像是在作弊，但实则并非如此。当一组参数被共同传递，就像上例中的x和y那样，往往就是该有自己名称的某个概念的一部分

  

##### 6.无副作用

  - 确保函数功能就像函数名描述的一样，不要做函数名描述以外的事情。应该为起一个更能描述函数功能的函数名
  
    ```java
    public UserValidator {
        private Cyptographer cyptographer;
        
        public boolean checkPassword(String userName, String password) {
            User user = UserGateway.findByName(userName);
            if(user != User.NULL) {
                String codePhrase = user.getPhraseEncodedByPassword();
                String phrase = cyptographer.decrypt(codePhrase, password);
                if("Valid Password".equals(phrase)) {
                    // 副作用在于对这个调用
                    // checkPassword函数，顾名思义，就是用来检查密码。该名称并未暗示它会
                    // 初始化该次会话。可以重命名为 checkPasswordAndIntializeSession
                    Session.initialize();
                    return true;
                }
            }
            return false;
        }
    }
    ```

  - 普通而言，应该避免使用输出参数，如果函数必须要修改某种状态，就修改所属对象的状态
  
    ```java
    // bad
    // 读者会弄不清s是输入参数还是输出参数
    // 也会弄不清这函数是把s添加到什么东西后面，还是把什么东西添加到s后面
    appendFooter(s); 
    // 函数签名
    public void appendFooter(StringBuffer report){}
    
    // good
    report.appendFooter();
    ```

##### 7.分隔指令与询问

  函数要行做什么事( 例如 `user.setName('xxx')` )、要么回答什么事( 例如 `user.isVip()` )。一个函数里不要把两件事都干了。

#####  8.如何写出好函数

  - 分解函数
  - 修改名称
  - 消除重复

  

##### 9.异常代替错误码

##### 10.抽离try/catch 代码块

  ![image-20211106134131841](https://raw.githubusercontent.com/codecodeabc/Note-len/main/img/202111061341900.png)



##### 11.错误处理就是一件事

![image-20211106134316671](https://raw.githubusercontent.com/codecodeabc/Note-len/main/img/202111061343741.png)



##### 12.error.java依赖

![image-20211106134420805](https://raw.githubusercontent.com/codecodeabc/Note-len/main/img/202111061344874.png)



