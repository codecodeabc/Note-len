# MySQL å®šæ—¶å¤‡ä»½æ•°æ®åº“ï¼ˆéå¸¸å…¨ï¼‰

https://mp.weixin.qq.com/s/XvGU0oPF0tKg1sV6o7m8tQ

 ğŸ‘‰ [JavaåŸºåŸº](javascript:void(0);) 

æºç ç²¾å“ä¸“æ 

- [åŸåˆ› | Java 2021 è¶…ç¥ä¹‹è·¯ï¼Œå¾ˆè‚~](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21#wechat_redirect)
- [ä¸­æ–‡è¯¦ç»†æ³¨é‡Šçš„å¼€æºé¡¹ç›®](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247486264&idx=1&sn=475ac3f1ef253a33daacf50477203c80&chksm=fa497489cd3efd9f7298f5da6aad0c443ae15f398436aff57cb2b734d6689e62ab43ae7857ac&scene=21#wechat_redirect)
- [RPC æ¡†æ¶ Dubbo æºç è§£æ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247484647&idx=1&sn=9eb7e47d06faca20d530c70eec3b8d5c&chksm=fa497b56cd3ef2408f807e66e0903a5d16fbed149ef7374021302901d6e0260ad717d903e8d4&scene=21#wechat_redirect)
- [ç½‘ç»œåº”ç”¨æ¡†æ¶ Netty æºç è§£æ](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247485054&idx=2&sn=9f3b85f7b8454634da6c5c2ded9b4dba&chksm=fa4979cfcd3ef0d9d2dd92d8d1bd8f1553abc6e2095a5d743e0b2c2afe4955ea2bbbd7a4b79d&token=55862109&lang=zh_CN&scene=21#wechat_redirect)
- [æ¶ˆæ¯ä¸­é—´ä»¶ RocketMQ æºç è§£æ](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247486256&idx=1&sn=81daccd3fcd2953456c917630636fb26&chksm=fa497481cd3efd97d9239f5eab060e49dea9876a6046eadba0effb878d2fb51f3ba5733e4c0b&scene=21#wechat_redirect)
- [æ•°æ®åº“ä¸­é—´ä»¶ Sharding-JDBC å’Œ MyCAT æºç è§£æ](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247486257&idx=1&sn=4d3c9c675f8833157641a2e0b48e498c&chksm=fa497480cd3efd96fe17975b0b8b141e87fd0a62673e6a30b501460de80b3eb997056f09de08&scene=21#wechat_redirect)
- [ä½œä¸šè°ƒåº¦ä¸­é—´ä»¶ Elastic-Job æºç è§£æ](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247486258&idx=1&sn=ae5665ae9c3002b53f87cab44948a096&chksm=fa497483cd3efd950514da5a37160e7fd07f0a96f39265cf7ba3721985e5aadbdcbe7aafc34a&scene=21#wechat_redirect)
- [åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶ TCC-Transaction æºç è§£æ](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247486259&idx=1&sn=b023cf3dbf97e5da59db2f4ee632f5a6&chksm=fa497482cd3efd9402d71469f71863f71a6998b27e12ca2e00446b8178d79dcef0721d8e570a&scene=21#wechat_redirect)
- [Eureka å’Œ Hystrix æºç è§£æ](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247486260&idx=1&sn=8f14c0c191d6f8df6eb34202f4ad9708&chksm=fa497485cd3efd93937143a648bc1b530bc7d1f6f8ad4bf2ec112ffe34dee80b474605c22db0&scene=21#wechat_redirect)
- [Java å¹¶å‘æºç ](http://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247486261&idx=1&sn=bd69f26aadfc826f6313ffbb95e44ee5&chksm=fa497484cd3efd92352d6fb3d05ccbaebca2fafed6f18edbe5be70c99ba088db5c8a7a8080c1&scene=21#wechat_redirect)

[æ¥æºï¼šwww.cnblogs.com/letcafe/
p/mysqlautodump.html](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

- [ä¸€ã€MySQLæ•°æ®å¤‡ä»½](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)

- - [1.1  mysqldumpå‘½ä»¤å¤‡ä»½æ•°æ®](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
  - [1.2 mysqldumpå¸¸ç”¨æ“ä½œç¤ºä¾‹](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
  - [1.3 è¿˜åŸ MySQL å¤‡ä»½å†…å®¹](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)

- [äºŒã€ ç¼–å†™è„šæœ¬ç»´æŠ¤å¤‡ä»½çš„æ•°æ®åº“æ–‡ä»¶](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)

- - [2.1 ç¼–å†™BASHç»´æŠ¤å›ºå®šæ•°é‡å¤‡ä»½æ–‡ä»¶](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)
  - [2.2 ä½¿ç”¨crontabå®šæœŸæ‰§è¡Œå¤‡ä»½è„šæœ¬](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)

[![å›¾ç‰‡](https://mmbiz.qpic.cn/mmbiz_png/6mychickmupUkicekJAnhLOjoAGyjuEP96kkWMwljgkOC0rLtyTmeiagwm6Fn5eABJxcibNs1r8icfHZKhPlWUm5ceA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&chksm=fa496f8ecd3ee698f4954c00efb80fe955ec9198fff3ef4011e331aa37f55a6a17bc8c0335a8&scene=21&token=899450012&lang=zh_CN#wechat_redirect)



------

åœ¨æ“ä½œæ•°æ®è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®é”™è¯¯ï¼Œç”šè‡³æ•°æ®åº“å¥”æºƒï¼Œè€Œæœ‰æ•ˆçš„å®šæ—¶å¤‡ä»½èƒ½å¾ˆå¥½åœ°ä¿æŠ¤æ•°æ®åº“ã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦è®²è¿°äº†å‡ ç§æ–¹æ³•è¿›è¡Œ MySQL å®šæ—¶å¤‡ä»½æ•°æ®åº“ã€‚

## [ä¸€ã€MySQLæ•°æ®å¤‡ä»½](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

### [1.1  mysqldumpå‘½ä»¤å¤‡ä»½æ•°æ®](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åœ¨MySQLä¸­æä¾›äº†å‘½ä»¤è¡Œå¯¼å‡ºæ•°æ®åº“æ•°æ®ä»¥åŠæ–‡ä»¶çš„ä¸€ç§æ–¹ä¾¿çš„å·¥å…·**mysqldump** ,æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œç›´æ¥å®ç°æ•°æ®åº“å†…å®¹çš„å¯¼å‡ºdump,é¦–å…ˆæˆ‘ä»¬ç®€å•äº†è§£ä¸€ä¸‹mysqldumpå‘½ä»¤ç”¨æ³•:

```
#MySQLdumpå¸¸ç”¨
mysqldump -u root -p --databases æ•°æ®åº“1 æ•°æ®åº“2 > xxx.sql
```

### [1.2 mysqldumpå¸¸ç”¨æ“ä½œç¤ºä¾‹](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

1. å¤‡ä»½å…¨éƒ¨æ•°æ®åº“çš„æ•°æ®å’Œç»“æ„

```
mysqldump -uroot -p123456 -A > /data/mysqlDump/mydb.sql
```

2.å¤‡ä»½å…¨éƒ¨æ•°æ®åº“çš„ç»“æ„ï¼ˆåŠ  -d å‚æ•°ï¼‰

```
mysqldump -uroot -p123456 -A -d > /data/mysqlDump/mydb.sql
```

1. å¤‡ä»½å…¨éƒ¨æ•°æ®åº“çš„æ•°æ®(åŠ  -t å‚æ•°)

```
mysqldump -uroot -p123456 -A -t > /data/mysqlDump/mydb.sql
```

4.å¤‡ä»½å•ä¸ªæ•°æ®åº“çš„æ•°æ®å’Œç»“æ„(,æ•°æ®åº“åmydb)

```
mysqldump -uroot-p123456 mydb > /data/mysqlDump/mydb.sql
```

1. å¤‡ä»½å•ä¸ªæ•°æ®åº“çš„ç»“æ„

```
mysqldump -uroot -p123456 mydb -d > /data/mysqlDump/mydb.sql
```

1. å¤‡ä»½å•ä¸ªæ•°æ®åº“çš„æ•°æ®

```
mysqldump -uroot -p123456 mydb -t > /data/mysqlDump/mydb.sql
```

1. å¤‡ä»½å¤šä¸ªè¡¨çš„æ•°æ®å’Œç»“æ„ï¼ˆæ•°æ®ï¼Œç»“æ„çš„å•ç‹¬å¤‡ä»½æ–¹æ³•ä¸ä¸ŠåŒï¼‰

```
mysqldump -uroot -p123456 mydb t1 t2 > /data/mysqlDump/mydb.sql
```

1. ä¸€æ¬¡å¤‡ä»½å¤šä¸ªæ•°æ®åº“

```
mysqldump -uroot -p123456 --databases db1 db2 > /data/mysqlDump/mydb.sql
```

### [1.3 è¿˜åŸ MySQL å¤‡ä»½å†…å®¹](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

æœ‰ä¸¤ç§æ–¹å¼è¿˜åŸï¼Œç¬¬ä¸€ç§æ˜¯åœ¨ MySQL å‘½ä»¤è¡Œä¸­ï¼Œç¬¬äºŒç§æ˜¯ä½¿ç”¨ SHELL è¡Œå®Œæˆè¿˜åŸ

1. åœ¨ç³»ç»Ÿå‘½ä»¤è¡Œä¸­ï¼Œè¾“å…¥å¦‚ä¸‹å®ç°è¿˜åŸï¼š

```
mysql -uroot -p123456 < /data/mysqlDump/mydb.sql
```

1. åœ¨ç™»å½•è¿›å…¥mysqlç³»ç»Ÿä¸­,é€šè¿‡sourceæŒ‡ä»¤æ‰¾åˆ°å¯¹åº”ç³»ç»Ÿä¸­çš„æ–‡ä»¶è¿›è¡Œè¿˜åŸï¼š

```
mysql> source /data/mysqlDump/mydb.sql
```

> æ¨èä¸‹è‡ªå·±åšçš„ Spring Boot çš„å®æˆ˜é¡¹ç›®ï¼š
>
> https://github.com/YunaiV/ruoyi-vue-pro

## [äºŒã€ ç¼–å†™è„šæœ¬ç»´æŠ¤å¤‡ä»½çš„æ•°æ®åº“æ–‡ä»¶](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åœ¨ Linuxä¸­ï¼Œé€šå¸¸ä½¿ç”¨**BASH** è„šæœ¬å¯¹éœ€è¦æ‰§è¡Œçš„å†…å®¹è¿›è¡Œç¼–å†™ï¼ŒåŠ ä¸Šå®šæ—¶æ‰§è¡Œå‘½ä»¤**crontab** å®ç°æ—¥å¿—è‡ªåŠ¨åŒ–ç”Ÿæˆã€‚

ä»¥ä¸‹ä»£ç åŠŸèƒ½å°±æ˜¯é’ˆå¯¹mysqlè¿›è¡Œå¤‡ä»½ï¼Œé…åˆcrontabï¼Œå®ç°å¤‡ä»½çš„å†…å®¹ä¸ºè¿‘ä¸€ä¸ªæœˆï¼ˆ31å¤©ï¼‰å†…çš„æ¯å¤©çš„mysqlæ•°æ®åº“è®°å½•ã€‚

### [2.1 ç¼–å†™BASHç»´æŠ¤å›ºå®šæ•°é‡å¤‡ä»½æ–‡ä»¶](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åœ¨Linuxä¸­ï¼Œä½¿ç”¨viæˆ–è€…vimç¼–å†™è„šæœ¬å†…å®¹å¹¶å‘½åä¸ºï¼šmysql_dump_script.sh

```
#!/bin/bash

#ä¿å­˜å¤‡ä»½ä¸ªæ•°ï¼Œå¤‡ä»½31å¤©æ•°æ®
number=31
#å¤‡ä»½ä¿å­˜è·¯å¾„
backup_dir=/root/mysqlbackup
#æ—¥æœŸ
dd=`date +%Y-%m-%d-%H-%M-%S`
#å¤‡ä»½å·¥å…·
tool=mysqldump
#ç”¨æˆ·å
username=root
#å¯†ç 
password=TankB214
#å°†è¦å¤‡ä»½çš„æ•°æ®åº“
database_name=edoctor

#å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨åˆ™åˆ›å»º
if [ ! -d $backup_dir ];
then     
    mkdir -p $backup_dir;
fi

#ç®€å•å†™æ³• mysqldump -u root -p123456 users > /root/mysqlbackup/users-$filename.sql
$tool -u $username -p$password $database_name > $backup_dir/$database_name-$dd.sql

#å†™åˆ›å»ºå¤‡ä»½æ—¥å¿—
echo "create $backup_dir/$database_name-$dd.dupm" >> $backup_dir/log.txt

#æ‰¾å‡ºéœ€è¦åˆ é™¤çš„å¤‡ä»½
delfile=`ls -l -crt $backup_dir/*.sql | awk '{print $9 }' | head -1`

#åˆ¤æ–­ç°åœ¨çš„å¤‡ä»½æ•°é‡æ˜¯å¦å¤§äº$number
count=`ls -l -crt $backup_dir/*.sql | awk '{print $9 }' | wc -l`

if [ $count -gt $number ]
then
  #åˆ é™¤æœ€æ—©ç”Ÿæˆçš„å¤‡ä»½ï¼Œåªä¿ç•™numberæ•°é‡çš„å¤‡ä»½
  rm $delfile
  #å†™åˆ é™¤æ–‡ä»¶æ—¥å¿—
  echo "delete $delfile" >> $backup_dir/log.txt
fi
```

å¦‚ä¸Šä»£ç ä¸»è¦å«ä¹‰å¦‚ä¸‹ï¼š

1.é¦–å…ˆè®¾ç½®å„é¡¹å‚æ•°ï¼Œä¾‹å¦‚numberæœ€å¤šéœ€è¦å¤‡ä»½çš„æ•°ç›®ï¼Œå¤‡ä»½è·¯å¾„ï¼Œç”¨æˆ·åï¼Œå¯†ç ç­‰ã€‚

2.æ‰§è¡Œmysqldumpå‘½ä»¤ä¿å­˜å¤‡ä»½æ–‡ä»¶ï¼Œå¹¶å°†æ“ä½œæ‰“å°è‡³åŒç›®å½•ä¸‹çš„log.txtä¸­æ ‡è®°æ“ä½œæ—¥å¿—ã€‚

3.å®šä¹‰éœ€è¦åˆ é™¤çš„æ–‡ä»¶ï¼šé€šè¿‡lså‘½ä»¤è·å–ç¬¬ä¹åˆ—ï¼Œå³æ–‡ä»¶ååˆ—ï¼Œå†é€šè¿‡å®ç°å®šä¹‰æ“ä½œæ—¶é—´æœ€æ™šçš„é‚£ä¸ªéœ€è¦åˆ é™¤çš„æ–‡ä»¶ã€‚

4.å®šä¹‰å¤‡ä»½æ•°é‡ï¼šé€šè¿‡lså‘½ä»¤åŠ ä¸Š

ç»Ÿè®¡ä»¥sqlç»“å°¾çš„æ–‡ä»¶çš„è¡Œæ•°ã€‚

5.å¦‚æœæ–‡ä»¶è¶…å‡ºé™åˆ¶å¤§å°ï¼Œå°±åˆ é™¤æœ€æ—©åˆ›å»ºçš„sqlæ–‡ä»¶

### [2.2 ä½¿ç”¨crontabå®šæœŸæ‰§è¡Œå¤‡ä»½è„šæœ¬](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

åœ¨ Linux ä¸­ï¼Œå‘¨æœŸæ‰§è¡Œçš„ä»»åŠ¡ä¸€èˆ¬ç”±cronè¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹æ¥å¤„ç†[ps -ef|grep cron]ã€‚cronè¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿™äº›é…ç½®æ–‡ä»¶ä¸­åŒ…å«äº†å‘½ä»¤è¡ŒåŠå…¶è°ƒç”¨æ—¶é—´ã€‚cronçš„é…ç½®æ–‡ä»¶ç§°ä¸ºâ€œcrontabâ€ï¼Œæ˜¯â€œcron tableâ€çš„ç®€å†™ã€‚

#### [cronæœåŠ¡](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

cronæ˜¯ä¸€ä¸ª Liunx ä¸‹ çš„å®šæ—¶æ‰§è¡Œå·¥å…·ï¼Œå¯ä»¥åœ¨æ— éœ€äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹è¿è¡Œä½œä¸šã€‚

service crond start  //å¯åŠ¨æœåŠ¡ service crond stop  //å…³é—­æœåŠ¡ service crond restart //é‡å¯æœåŠ¡ service crond reload  //é‡æ–°è½½å…¥é…ç½® service crond status  //æŸ¥çœ‹æœåŠ¡çŠ¶æ€

#### [crontabè¯­æ³•](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

crontabå‘½ä»¤ç”¨äºå®‰è£…ã€åˆ é™¤æˆ–è€…åˆ—å‡ºç”¨äºé©±åŠ¨cronåå°è¿›ç¨‹çš„è¡¨æ ¼ã€‚ç”¨æˆ·æŠŠéœ€è¦æ‰§è¡Œçš„å‘½ä»¤åºåˆ—æ”¾åˆ°crontabæ–‡ä»¶ä¸­ä»¥è·å¾—æ‰§è¡Œã€‚æ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥æœ‰è‡ªå·±çš„crontabæ–‡ä»¶ã€‚/var/spool/cronä¸‹çš„crontabæ–‡ä»¶ä¸å¯ä»¥ç›´æ¥åˆ›å»ºæˆ–è€…ç›´æ¥ä¿®æ”¹ã€‚è¯¥crontabæ–‡ä»¶æ˜¯é€šè¿‡crontabå‘½ä»¤åˆ›å»ºçš„ã€‚

åœ¨crontabæ–‡ä»¶ä¸­å¦‚ä½•è¾“å…¥éœ€è¦æ‰§è¡Œçš„å‘½ä»¤å’Œæ—¶é—´ã€‚è¯¥æ–‡ä»¶ä¸­æ¯è¡Œéƒ½åŒ…æ‹¬å…­ä¸ªåŸŸï¼Œå…¶ä¸­å‰äº”ä¸ªåŸŸæ˜¯æŒ‡å®šå‘½ä»¤è¢«æ‰§è¡Œçš„æ—¶é—´ï¼Œæœ€åä¸€ä¸ªåŸŸæ˜¯è¦è¢«æ‰§è¡Œçš„å‘½ä»¤ã€‚æ¯ä¸ªåŸŸä¹‹é—´ä½¿ç”¨ç©ºæ ¼æˆ–è€…åˆ¶è¡¨ç¬¦åˆ†éš”ã€‚

æ ¼å¼å¦‚ä¸‹ï¼šminute hour day-of-month month-of-year day-of-week commands åˆæ³•å€¼ 00-59 00-23 01-31 01-12 0-6 (0 is sunday)

é™¤äº†æ•°å­—è¿˜æœ‰å‡ ä¸ªä¸ªç‰¹æ®Šçš„ç¬¦å·å°±æ˜¯"*"ã€"/"å’Œ"-"ã€","ï¼Œ*ä»£è¡¨æ‰€æœ‰çš„å–å€¼èŒƒå›´å†…çš„æ•°å­—ï¼Œ"/"ä»£è¡¨æ¯çš„æ„æ€,"/5"è¡¨ç¤ºæ¯5ä¸ªå•ä½ï¼Œ"-"ä»£è¡¨ä»æŸä¸ªæ•°å­—åˆ°æŸä¸ªæ•°å­—,","åˆ†å¼€å‡ ä¸ªç¦»æ•£çš„æ•°å­—ã€‚

-l åœ¨æ ‡å‡†è¾“å‡ºä¸Šæ˜¾ç¤ºå½“å‰çš„crontabã€‚-r åˆ é™¤å½“å‰çš„crontabæ–‡ä»¶ã€‚-e ä½¿ç”¨VISUALæˆ–è€…EDITORç¯å¢ƒå˜é‡æ‰€æŒ‡çš„ç¼–è¾‘å™¨ç¼–è¾‘å½“å‰çš„crontabæ–‡ä»¶ã€‚å½“ç»“æŸç¼–è¾‘ç¦»å¼€æ—¶ï¼Œç¼–è¾‘åçš„æ–‡ä»¶å°†è‡ªåŠ¨å®‰è£…ã€‚

#### [åˆ›å»ºcronè„šæœ¬](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487551&idx=1&sn=18f64ba49f3f0f9d8be9d1fdef8857d9&scene=21#wechat_redirect)

ç¬¬ä¸€æ­¥ï¼šå†™cronè„šæœ¬æ–‡ä»¶,å‘½åä¸ºmysqlRollBack.cronã€‚15,30,45,59 * * * * echo "xgmtest....." >> xgmtest.txt è¡¨ç¤ºï¼Œæ¯éš”15åˆ†é’Ÿï¼Œæ‰§è¡Œæ‰“å°ä¸€æ¬¡å‘½ä»¤ ç¬¬äºŒæ­¥ï¼šæ·»åŠ å®šæ—¶ä»»åŠ¡ã€‚æ‰§è¡Œå‘½ä»¤ â€œcrontab crontest.cronâ€ã€‚æå®š ç¬¬ä¸‰æ­¥ï¼š"crontab -l" æŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ˜¯å¦æˆåŠŸæˆ–è€…æ£€æµ‹/var/spool/cronä¸‹æ˜¯å¦ç”Ÿæˆå¯¹åº”cronè„šæœ¬

æ³¨æ„ï¼šè¿™æ“ä½œæ˜¯ç›´æ¥æ›¿æ¢è¯¥ç”¨æˆ·ä¸‹çš„crontabï¼Œè€Œä¸æ˜¯æ–°å¢

å®šæœŸæ‰§è¡Œç¼–å†™çš„å®šæ—¶ä»»åŠ¡è„šæœ¬ï¼ˆè®°å¾—å…ˆç»™shellè„šæœ¬æ‰§è¡Œæƒé™ï¼‰

```
0 2 * * * /root/mysql_backup_script.sh
```

éšåä½¿ç”¨crontabå‘½ä»¤å®šæœŸæŒ‡ä»¤ç¼–å†™çš„å®šæ—¶è„šæœ¬

```
crontab mysqlRollback.cron
```

å†é€šè¿‡å‘½ä»¤æ£€æŸ¥å®šæ—¶ä»»åŠ¡æ˜¯å¦å·²åˆ›å»ºï¼š

é™„ crontab çš„ä½¿ç”¨ç¤ºä¾‹ï¼š

1. æ¯å¤©æ—©ä¸Š6ç‚¹

```
0 6 * * * echo "Good morning." >> /tmp/test.txt //æ³¨æ„å•çº¯echoï¼Œä»å±å¹•ä¸Šçœ‹ä¸åˆ°ä»»ä½•è¾“å‡ºï¼Œå› ä¸ºcronæŠŠä»»ä½•è¾“å‡ºéƒ½emailåˆ°rootçš„ä¿¡ç®±äº†ã€‚
```

1. æ¯ä¸¤ä¸ªå°æ—¶

```
0 */2 * * * echo "Have a break now." >> /tmp/test.txt
```

1. æ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š8ç‚¹ä¹‹é—´æ¯ä¸¤ä¸ªå°æ—¶å’Œæ—©ä¸Šå…«ç‚¹

```
0 23-7/2ï¼Œ8 * * * echo "Have a good dream" >> /tmp/test.txt
```

1. æ¯ä¸ªæœˆçš„4å·å’Œæ¯ä¸ªç¤¼æ‹œçš„ç¤¼æ‹œä¸€åˆ°ç¤¼æ‹œä¸‰çš„æ—©ä¸Š11ç‚¹

```
0 11 4 * 1-3 command line
```

5.1 æœˆ 1 æ—¥æ—©ä¸Š 4 ç‚¹

```
0 4 1 1 * command line SHELL=/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=root //å¦‚æœå‡ºç°é”™è¯¯ï¼Œæˆ–è€…æœ‰æ•°æ®è¾“å‡ºï¼Œæ•°æ®ä½œä¸ºé‚®ä»¶å‘ç»™è¿™ä¸ªå¸å· HOME=/
```

1. æ¯å°æ—¶æ‰§è¡Œ/etc/cron.hourlyå†…çš„è„šæœ¬

```
01 * * * * root run-parts /etc/cron.hourly
```

1. æ¯å¤©æ‰§è¡Œ/etc/cron.dailyå†…çš„è„šæœ¬

```
02 4 * * * root run-parts /etc/cron.daily
```

1. æ¯æ˜ŸæœŸæ‰§è¡Œ/etc/cron.weeklyå†…çš„è„šæœ¬

```
22 4 * * 0 root run-parts /etc/cron.weekly
```

1. æ¯æœˆå»æ‰§è¡Œ/etc/cron.monthlyå†…çš„è„šæœ¬

```
42 4 1 * * root run-parts /etc/cron.monthly
```

æ³¨æ„: "run-parts" è¿™ä¸ªå‚æ•°äº†ï¼Œå¦‚æœå»æ‰è¿™ä¸ªå‚æ•°çš„è¯ï¼Œåé¢å°±å¯ä»¥å†™è¦è¿è¡Œçš„æŸä¸ªè„šæœ¬åï¼Œè€Œä¸æ˜¯æ–‡ä»¶å¤¹åã€‚

1. æ¯å¤©çš„ä¸‹åˆ4ç‚¹ã€5ç‚¹ã€6ç‚¹çš„5 minã€15 minã€25 minã€35 minã€45 minã€55 minæ—¶æ‰§è¡Œå‘½ä»¤ã€‚

```
5ï¼Œ15ï¼Œ25ï¼Œ35ï¼Œ45ï¼Œ55 16ï¼Œ17ï¼Œ18 * * * command
```

1. æ¯å‘¨ä¸€ï¼Œä¸‰ï¼Œäº”çš„ä¸‹åˆ3ï¼š00ç³»ç»Ÿè¿›å…¥ç»´æŠ¤çŠ¶æ€ï¼Œé‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚

```
00 15 * * 1ï¼Œ3ï¼Œ5 shutdown -r +5
```

1. æ¯å°æ—¶çš„10åˆ†ï¼Œ40åˆ†æ‰§è¡Œç”¨æˆ·ç›®å½•ä¸‹çš„innd/bbslinè¿™ä¸ªæŒ‡ä»¤ï¼š

```
10ï¼Œ40 * * * * innd/bbslink
```

1. æ¯å°æ—¶çš„1åˆ†æ‰§è¡Œç”¨æˆ·ç›®å½•ä¸‹çš„bin/accountè¿™ä¸ªæŒ‡ä»¤ï¼š

ä»¥ä¸‹æ˜¯æˆ‘çš„æµ‹è¯•æ¯åˆ†é’Ÿçš„æˆªå›¾æ•ˆæœï¼Œå…¶å¯¹åº”ä»£ç å¦‚ä¸‹ï¼š

```
* * * * * /root/mysql_backup_script.sh
```

æ•ˆæœæˆªå›¾ï¼š

![640.webp](https://raw.githubusercontent.com/codecodeabc/Note-len/main/img/20211114225240.jpg)

å…¶ä¸­çš„log.txtè®°å½•å¤‡ä»½çš„æ“ä½œè¯¦ç»†æ—¥å¿—ï¼š

![640.webp](https://raw.githubusercontent.com/codecodeabc/Note-len/main/img/20211114225424.jpg)

------

